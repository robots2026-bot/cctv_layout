# 布局树形视图

1. 布局工作台处于「观看」模式且当前布局包含 `OFC` 交换机时，可在「显示全部」按钮右侧点击「树形图」生成只读视图；若未检测到 `OFC` 交换机，前端会提示并保持原模式。
2. 树图取当前布局的所有设备/连线，以 `OFC` 交换机作为根节点，沿连线关系横向展开：根位于画布最左侧，子节点依次向右铺开，保持与布局视图一致的配色与状态图标。
3. 交互仅允许画布拖拽与缩放；节点/连线不可编辑、不可右键，悬停节点会展示名称与在线状态。
4. 视图实时订阅 WebSocket 状态，当在线状态或连线告警更新时即刻刷新树图颜色。
5. 退出树形图（再次点击按钮或切换到布局/连线/蓝图模式）后恢复原有画布、属性面板与未布局设备面板。

## 自测建议

1. `docker compose up -d postgres redis backend frontend` 后进入布局工作台，确保至少一个名称或型号包含 `OFC` 的交换机存在。
2. 切换「观看」→「树形图」：节点应以倒立树形呈现，根在画布底部；拖动画布、滚轮缩放均可用。
3. 悬停节点确认工具提示显示设备名称与状态颜色；断开/恢复某条连线，树图连线颜色同步变化。
4. 删除或重命名 `OFC` 交换机后再尝试开启树形图，应提示“当前布局未包含 OFC 交换机”并保持原模式。
