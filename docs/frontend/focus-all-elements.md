# 前端布局全局定位按钮（2025-05）

## 需求背景
1. 画布缩放或拖拽后，用户可能难以找到已放置的设备节点，需要一种一键找回全部组件的能力。
2. 期望在现有缩放滑杆旁提供显著入口，点击即可让视口自动缩放并定位到所有组件范围内。

## 方案概要
- 在 `canvasStore` 新增 `focusAllElements` 行为，依据画布元素的几何边界计算适合的缩放倍数与偏移量，并更新 `viewport`。
- 缩放倍数限制在 `[0.2, 1.0]`，保证在缩小时完整展示全部组件，若原本内容较小则维持 1 倍避免过度放大。
- 视口平移计算以元素包围盒中心为基准，使所有节点在当前视窗居中呈现，并预留 80px 的视觉边距。
- 在全局视图控制区（画布左上角的缩放按钮后）新增“显示全部”入口，解锁状态与否均可使用；当画布无元素时按钮禁用以避免无效操作。

## 关键实现
1. `canvasStore`
   - 扩展 `CanvasState` 定义并实现 `focusAllElements`：
     - 当视口尚未初始化时返回空补丁，防止非法计算。
     - 无元素时恢复默认视口（缩放 1，偏移 0）。
     - 使用元素位置与尺寸计算包围盒，结合视口尺寸得出目标缩放与平移。
2. `CanvasLinkingControls`
  - 读取 `focusAllElements` 与 `elements`，封装点击处理逻辑。
  - 在全局缩放按钮旁渲染入口，并设置禁用态与基础 hover 效果，与现有工具条视觉风格保持一致。

## 验证
- 手动自测：
  1. 画布放置多个设备，拖拽至不同位置，调整视口缩放与平移。
  2. 点击“显示全部”，所有节点重新出现在视口中心，缩放自动调整至可见范围内。
  3. 清空画布后按钮为禁用状态，再次点击无副作用。
- `npm run lint`（存在既有未清理的 ESLint unused-vars 问题，命令返回错误）。
