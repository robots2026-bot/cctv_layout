# 后端样例数据写入指引

## 背景
- 本地或演示环境需要包含项目、布局、设备等基础数据，以便快速验证画布连线、设备状态与操作日志链路。

## 前置条件
1. PostgreSQL 与 Redis 已运行，可通过 `docker compose up postgres redis` 快速拉起依赖。
2. 已执行数据库迁移或确保对应数据表存在（当前仓库使用 TypeORM 实体定义 schema）。
3. 在 `backend` 目录配置数据库连接变量（默认值指向 `localhost:5432`，用户名/密码均为 `postgres`）。

## 写入步骤
- 后端启动命令（`npm start`、`npm run start:dev`）会在连接前自动检查并创建目标数据库。
1. 安装依赖：`npm install`
2. 执行脚本：`npm run seed`（会自动创建数据库并同步缺失的表结构）
3. 控制台输出 `Sample data inserted successfully.` 表示写入完成；若检测到已存在 `admin@demo.cctv` 用户，则会跳过，避免重复插入。

## 数据说明
- 账号：
  - 管理员：`admin@demo.cctv` / `Admin123!`
  - 工程师：`engineer@demo.cctv` / `Engineer123!`
- 项目：
  - `工地一期总控`，默认布局 `主控制室布局`
  - `仓库联网规划`，默认布局 `仓库园区布局`
- 布局版本：每个项目包含 1 个版本，附带设备节点、连线与视图状态示例。
- 设备与日志：覆盖摄像头、无线网桥、交换机等类型，并记录基础操作日志，便于前端展示状态流转。

> 若需重新导入，可删除目标数据库中的相关表数据后再次执行脚本。