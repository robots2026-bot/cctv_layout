# 前端工作台布局重构（2025-10）

## 目标
- 主界面左侧固定项目列表并支持快速搜索，提升跨项目切换效率。
- 中央区域聚焦布局画布，保持拖拽、连线等核心能力。
- 右侧侧栏用于展示未布局设备资源与统计，便于工程师及时补齐布点。
- 左右侧栏可折叠，节省画布操作空间。
- 画布节点根据类型呈现对应图形，仅显示名称与 IP，并以背景色区分设备在线状态；未布局设备列表同步使用相同图形表示类别。
- 取消左键选中节点，改为鼠标悬停时在右上浮窗展示详情（名称/IP），离开即隐藏。
- 属性浮窗改为展示悬停信息，不再直接编辑。

## 实施要点
1. `ShellLayout`
   - 引入本地 `searchTerm` 状态与 `useMemo` 过滤项目。
   - 移除右侧通知侧栏，改为在页眉展示实时状态与通知数量。
   - 添加 `/projects/manage` 快捷入口，对应项目管理页面（原 `ProjectOverview`）。
2. `App`
   - 新增 `WorkbenchRedirect`：自动跳转至首个带默认布局的项目；若不存在则提示前往项目管理。
   - 新增 `ProjectWithoutLayout`：用于提示未设默认布局的项目。
3. `LayoutWorkbench`
   - 调整为“画布 + 设备资源栏”结构，设备栏宽度调整为 `w-72` 以腾出画布空间。
   - `FloatingPropertyPanel` 改为根据悬停设备展示名称与 IP，并随状态变更背景色。
   - 设备侧栏新增折叠按钮，折叠后在画布右上角显示“展开设备”入口。
   - 节点支持右键菜单删除，删除后设备回流到“未布局”列表。
   - 点击画布左上角“连线模式”后依次选择起点与终点即可创建连线；连线采用双轨 + 稀疏箭纹方案，分离展示上/下行数据并在中段标注带宽。
4. `DevicePalette`
   - 增加统计卡片（总数/未布局/已布局），并在加载时反馈状态。
   - 设备卡片改为状态背景（绿色在线 / 深灰离线）+ 图标 + 名称/IP 两行信息，宽度收窄方便快速浏览，悬停仅高亮外框。
   - 布局方式统一改为拖拽：移除点击放置逻辑，支持从设备列表拖动到画布；放置成功后从“未布局”列表移除，避免重复布点。

## 后续验证
- 启动前后端容器：`docker compose up -d frontend backend postgres redis`
- 在 `frontend` 容器中执行 `npm run build` 确认通过。
- 手动验证流程：
  1. 搜索项目关键字，确认列表即时过滤。
  2. 选择项目后，右侧显示未布局设备列表与统计。
  3. 左侧项目栏与右侧设备栏可折叠/展开。
  4. 拖拽设备放置到画布，确保列表中对应条目被移除，统计实时更新。
  5. 启用“连线模式”并依次点击起点/终点生成连线，确认双轨箭纹及上下行带宽标签展示正确。
  6. 在连线模式下选中连线并点击“删除选中连线”或按 Delete/右键删除，确认设备返回“未布局设备”列表，连线随之移除。
  7. 悬停画布节点，右上浮窗展示名称与 IP，并随着在线/离线切换背景色；鼠标移开后浮窗恢复默认提示。
